# 2. 設計

設計は要求を「**どのように**」実現していくかを考えるプロセスです。

ソフトウェア開発ではひとことに設計といってもその対象は山ほどあります。例えば

- クラス設計
- 運用設計
- データベース設計
- 画面設計
- テスト設計
- ネットワーク設計

などがあります。

## 目標

開発するソフトウェアの構成を決定して設計図を作成することで実装ができる状態にします。それがここでのゴールです。

## 設計対象

最初に何を設計するべきかをはっきりさせます。例えばクライアントアプリケーションでインターネットにつなぐ必要がないのであればネットワーク設計は必要ありませんし、画面が必要ないのであれば画面設計は必要ありません。

今回はインターネットの接続や Web アプリケーションを想定していますが、ひとまずテスト段階というのを理由にインフラ設計やログ設計、運用設計は省略することにします。

その結果、最低限の作業として以下を設計することにしました。

- クラス図
- ER 図（テーブル定義図）
- ワイヤーフレーム（画面設計図）

## 設計プロセス

設計プロセスも基本的に反復作業です。しかも、設計の最中に要件定義に関する不明点が発生した場合は再度要件定義を行います。設計の途中で要件の抜け漏れが見つかることはよくあることですので、勝手に設計を進めずにもう一度要件について話し合いましょう。

私は先ほど決定した設計対象においては以下の作業を行うようにしています。

### 1. ユースケースとロバストネス分析

ユースケースとは実際にソフトウェアができた際にどのように使うのかを想定したものです。ここから各機能における仕様を分析していくことになります。

ロバストネス分析は予備設計と呼ばれており、ユースケースをもとにユーザーとシステムはどのようなアクションをとるのかを分析します。

ロバストネス分析を行うことで発見した新たな情報はドメインモデルにも反映させます。これをすべてのユースケースに適用させていくことで次に説明するクラス図の作成がスムーズに行えます。

### 2. 画面設計、ワイヤーフレームの作成

画面設計ではアプリがどのような画面で構成されるかを考えます。
私は以下の順序で行っています。

> 画面構成の決定　=> UI の検討 => ワイヤーフレーム作成

### 3 アーキテクチャの決定

開発対象や目的に合わせてアーキテクチャを検討します。
端末への依存を減らしインターネット接続を必要としていることから今回は Web アプリケーションでの開発を前提に SPA（シングルページアプリケーション）を採用し、API を呼び出すことで JSON 形式でデータが取得できるようにします。

また、今回扱うデータはデータ関係や整合性が重要になることから静的型付けが可能な言語とリレーショナルデータベースを使います。`Angular`は必要なライブラリがすべてそろっており`Typescript`がデファクトスタンダードである、`Scala`は安全な型付けや関数型プログラミングによる副作用の防止、Option 型による`NullPointerException`の回避ができることから両者を採用することにしました。また、`Playframework`は Scala でよく使われるフレームワークで軽量かつ高速で、DI(依存性注入)のデザインパターンが採用されているので疎結合にたもつことができます。

### 4. クラス図の作成

まずは更新されたドメインモデルをもとにクラス図を作成していきます。その後アーキテクチャを意識してシーケンス分析を行い、シーケンス分析で出てきたコントローラクラスをクラス図に反映させます。

### 5. テーブル定義図および ER 図の作成

適切にクラス図が作成されていればデータの関係性がある程度見えてきます。クラス図を基に ER 図を作成し修正を加えながらテーブル定義図を作成していきます。
