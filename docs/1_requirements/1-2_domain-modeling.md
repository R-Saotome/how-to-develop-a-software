![ドメインモデル](/img/latest/domain-model.jpg)

# ドメインモデリング

The Oxford American English Dictionary によるとドメイン(domain)には

> An area of activity or knowledge

という意味があり、これはその分野における活動もしくは知識のことを指します。つまり、**ドメインモデリングとはそのビジネスにおける知識をモデルで表現すること**です。こうして出来上がったモデルはクライアントのビジネス言語で書かれているためクライアントにとっても比較的理解しやすく、クライアントと開発者間の共通言語辞典としても使えます。

ドメインモデルに属性やふるまいを持たせてどんどん洗練させていくことでビジネスレベルで実装に昇華させることができます。ですが最初の段階では属性や振る舞いは意識せずにドメイン単位で書きだすことにします。私は以下の手順でドメインモデルを作成しています。

## 1. 要求からキーワードを抽出

[1-1.要求モデリング](./1-1_business-analysis)からドメインとなりそうなキーワードを書き出します。ざっとこんな感じです。

- 営業マン
- 顧客情報
- 名刺情報
- 案件情報
- 日報
- スケジュール
- カスタムシート
- カスタム情報
- カスタム項目
- 進捗
- 検索結果
- 関連情報

「パスワード」や「顧客名」といった各ドメインの詳細を示す情報は**属性**といいます（プログラミングにおけるメンバ変数やプロパティに該当します）。この段階では属性まで洗い出す必要はありません。出てきたらメモしておく程度に私はしています。

## 2. キーワードを関連づける

ドメインモデルは _UML_ _と呼ばれるモデリング言語で表現されます。UML_ ではいろんな表現技法がありますが、ここで使うのは以下の二つだけです。

### 集約(has-a)

**A は B を持っている（もしくは B は A の一部である）**　ことを表現するときに使います。例えば案件情報と進捗状況の関係性はまさに「案件情報は進捗状況を持っている（進捗状況は案件情報の一部である）」と言えます。

### 汎化(is-a)

**A は B である（もしくは B は A のスーパークラスである）**　ことを表現するときに使います。例えば顧客検索結果というのは絞り込みされた顧客情報一覧です。つまり顧客情報一覧は顧客検索結果のスーパークラスであると言えます。

このようにして抽出されたキーワードを関連付けていきます。

## 3. ドメインモデルを更新していく

1 と 2 を繰り返し行いドメインモデルを洗練していきます。また、ドメインモデルの更新作業は常に行っていきます。

要求が更新されたり、設計が進んでいくにつれて見落としていたドメインが見つかったりドメインモデルを修正すべきと感じることが多々あります。全ては反復作業です。

何度か繰り返し行っていくとある程度洗練され、上図のようなモデルが出来上がります。
